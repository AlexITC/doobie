<html><head><title>doobie: changelog</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Rob Norris" /><meta name="description" content="A functional JDBC layer for Scala." /><meta name="og:image" content="/doobie/img/poster.png" /><meta name="image" property="og:image" content="/doobie/img/poster.png" /><meta name="og:title" content="doobie: changelog" /><meta name="title" property="og:title" content="doobie: changelog" /><meta name="og:site_name" content="doobie" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A functional JDBC layer for Scala." /><link rel="icon" type="image/png" href="/doobie/img/favicon.png" /><meta name="twitter:title" content="doobie: changelog" /><meta name="twitter:image" content="/doobie/img/poster.png" /><meta name="twitter:description" content="A functional JDBC layer for Scala." /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/doobie/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/doobie/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/doobie/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/doobie/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/doobie/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/doobie/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/doobie/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/doobie/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/doobie/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/doobie/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/doobie/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/doobie/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/doobie/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/doobie/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/doobie/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/doobie/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/doobie/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/doobie/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/doobie/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/doobie/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/doobie/highlight/styles/color-brewer.css" /><link rel="stylesheet" href="/doobie/css/style.css" /><link rel="stylesheet" href="/doobie/css/palette.css" /><link rel="stylesheet" href="/doobie/css/codemirror.css" /><link rel="stylesheet" href="/doobie/css/tweak.css" /></head><body><header id="site-header"><div class="navbar-wrapper navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/doobie/" class="brand"><div class="icon-wrapper"><span>doobie</span></div></a></div><nav class="text-right"><ul class=""><li><a href="https://github.com/tpolecat/doobie"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="https://www.javadoc.io/doc/org.tpolecat/doobie-core_2.12"><i class="fa fa-file-text"></i><span class="hidden-xs">Documentation</span></a></li></ul></nav></div></div><div class="jumbotron" style="background-image:url('/doobie/img/jumbotron_pattern.png')"></div><div><ul class="horizontalNav">                                           <li><a class="" href="/doobie/book.html">book of doobie</a></li>  <li><a class="" href="/doobie/migration.html">migration</a></li>  <li><a class="" href="/doobie/infographic.html">infographic</a></li>  <li><a class=" active " href="/doobie/changelog.html">changelog</a></li>  <li><a class="" href="/doobie/license.html">license</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><h1 id="changelog">changelog</h1>

<p>This file summarizes <strong>notable</strong> changes for each release, but does not describe internal changes unless they are particularly exciting. For complete details please see the corresponding <a href="https://github.com/tpolecat/doobie/milestones?state=closed">milestones</a> and their associated issues.</p>

<hr />

<h3 id="updates-available-in-the-latest-snapshot">Updates Available in the latest SNAPSHOT</h3>

<p>(none yet)</p>

<h3 id="new-and-noteworthy-for-version-082"><a name="0.8.2"></a>New and Noteworthy for Version 0.8.2</h3>

<p><em>Note that tags exist for 0.8.0 and 0.8.1 but there are no artifacts due to various screwups. 0.8.2 is the first release on the 0.8.x series.</em></p>

<p>This is mostly an upgrade for Cats 2.0 and associated upstream releases. Note that <strong>Scala 2.11</strong> is no longer supported, please upgrade!</p>

<ul>
  <li>Updated to Cats 2.0, along with many other dependency upgrades.</li>
  <li>Added <code class="highlighter-rouge">explain</code> and <code class="highlighter-rouge">explainAnalyze</code> to <code class="highlighter-rouge">Query[0]/Update[0]</code> with Postgres. See the book chapter on Postgres extensions for more information.</li>
  <li>Added syntax so you can say <code class="highlighter-rouge">foo.fr</code> instead of <code class="highlighter-rouge">fr"$foo"</code>.</li>
</ul>

<p>Contributors for this release include Ben Plommer, Chris Davenport, dantb, deusaquilus, GRYE, Ikrom, Justin Bailey, Nick Hallstrom, Omer Zach, Sam Guymer, Scala Steward, Valy Dia, and Xie Yuheng. Thanks!</p>

<hr />

<h3 id="new-and-noteworthy-for-version-070"><a name="0.7.0"></a>New and Noteworthy for Version 0.7.0</h3>

<p>This is a <strong>compatibility-breaking</strong> release, although most source code should compile unmodified.</p>

<p>The big changes are improvements in resource safety:</p>

<ul>
  <li>Replaced <code class="highlighter-rouge">MonadError</code>-based <code class="highlighter-rouge">guarantee</code> with <code class="highlighter-rouge">bracket</code>, which prevents potential resource leakage when using cancelable IO; and improves transactor resource safety by using <code class="highlighter-rouge">Resource</code>. The migration guide contains slightly more information. Thanks <strong>Sam Guymer</strong> for these updates!</li>
  <li><code class="highlighter-rouge">Fragment</code> concatenation and derived combinators like <code class="highlighter-rouge">Fragments.in</code> are now stacksafe, so you can now have gigantic <code class="highlighter-rouge">IN</code> clauses. This required API changes in <code class="highlighter-rouge">Param</code>, <code class="highlighter-rouge">Fragment</code>, <code class="highlighter-rouge">Update[0]</code> and <code class="highlighter-rouge">Query[0]</code> but these should not affect most users.</li>
</ul>

<p>New features:</p>

<ul>
  <li>At long last there is a <code class="highlighter-rouge">doobie-quill</code> module that allows constructing <code class="highlighter-rouge">ConnectionIO</code> values via <a href="https://getquill.io/">Quill</a> quotes. See the new book chapter for examples. Many thanks to <strong>Alex Ioffe</strong> and <strong>Chris Davenport</strong> for their assistance!</li>
</ul>

<p>And an assortment of other improvements:</p>

<ul>
  <li>Postgis has been upgraded to v2.3.0. Thanks <strong>Erlend Hamnaberg</strong>!</li>
  <li>Added support for Scala 2.13.0-M5, many thanks to <strong>Sam Guymer</strong> for setting this up!</li>
  <li><code class="highlighter-rouge">TypeTag</code> constraint on <code class="highlighter-rouge">Analyzable</code> has been relaxed to <code class="highlighter-rouge">WeakTypeTag</code>. Thanks <strong>nigredo-tori</strong>!</li>
  <li>New syntax allows <code class="highlighter-rouge">.transact</code> on <code class="highlighter-rouge">OptionT</code> and <code class="highlighter-rouge">EitherT</code> of <code class="highlighter-rouge">ConnectionIO</code>, rolling back in the failure cases. Thanks <strong>Julien Truffaut</strong>!</li>
  <li>Postgres now supports arrays of Scala <code class="highlighter-rouge">BigDecimal</code>. Thanks <strong>Nicolas Rémond</strong>!</li>
  <li>Most calls to <code class="highlighter-rouge">throw</code> have been replaced with <code class="highlighter-rouge">raiseError</code>, which allows doobie to work with effect types that don’t catch. Thanks <strong>Sam Guymer</strong>!</li>
  <li>Some things in the build were preventing doobie from cooperating with the community build. This has been fixed, thanks <strong>Seth Tisue</strong>!</li>
  <li><code class="highlighter-rouge">Text[Char]</code> instance was added for Postgres <code class="highlighter-rouge">COPY FROM STDIN</code>. Thanks <strong>Dermot Haughey</strong>!</li>
  <li>You can now create a <code class="highlighter-rouge">HikariTransactor</code> from a <code class="highlighter-rouge">HikariConfig</code>. Thanks <strong>Yuriy Badalyantc</strong>!</li>
  <li>Thanks to <strong>Harry Laoulakos</strong> and <strong>Daan Hoogenboezem</strong> for documentation updates!</li>
  <li><code class="highlighter-rouge">Fragment</code> combinators now parenthesize arguments so associativity in Scala is reflected in generated SQL. Thanks <strong>Katrix</strong>!</li>
</ul>

<hr />

<h3 id="new-and-noteworthy-for-version-060"><a name="0.6.0"></a>New and Noteworthy for Version 0.6.0</h3>

<p>Many thanks to <strong>Arber Shabhasa</strong>, <strong>Bjørn Madsen</strong>, <strong>Chris Davenport</strong>, <strong>Cody Allen</strong>, <strong>Dmitry Polienko</strong>, <strong>Kai(luo) Wang</strong>, <strong>Kevin Walter</strong>, <strong>Mark Canlas</strong>, and <strong>Quang Le Hong</strong> for their contributions to this release.</p>

<p>:exclamation: This is a major update with <strong>breaking changes</strong>. Please read the following notes carefully.</p>

<h4 id="transactors-and-threading">Transactors and Threading</h4>

<p>Prior to 0.6.x <strong>doobie</strong> had nothing to say about threading; it was up to users to shift interpreted <code class="highlighter-rouge">IO</code> programs onto dedicated pools if desired. This has changed. We now identify three distinct execution contexts that are relevant to database applications.</p>

<ol>
  <li>All <em>non-blocking</em> work is performed on the execution context identified by <a href="https://typelevel.org/cats-effect/datatypes/contextshift.html"><code class="highlighter-rouge">ContextShift[F]</code></a>. If you are using <a href="https://typelevel.org/cats-effect/datatypes/ioapp.html"><code class="highlighter-rouge">IOApp</code></a> (which you should) this instance is provided for you. All interpreters (and thus all transactors) need this instance on construction.</li>
  <li>Requesting a JDBC connection is a blocking operation, so to avoid deadlock these requests cannot be placed in competition with running programs (which need to make progress in order to finish up and return their connections to the pool). Therefore we need a distinct, bounded, blocking execution context for the single purpose of awaiting database connections. All transactors that use a connection pool will require this execution context to be specified.</li>
  <li>All JDBC primitive operations are [potentially] blocking, so we need a distinct, typically unbounded (since the connection context above provides a logical bound) execution context for scheduling these operations. All transactors that use a connection pool will require this execution context to be specified.</li>
</ol>

<p>For convenience we provide an <code class="highlighter-rouge">ExecutionContexts</code> module that provides <a href=""><code class="highlighter-rouge">Resource</code></a>s yielding the kinds of <code class="highlighter-rouge">ExecutionContext</code>s that will tend to be useful for the scenarios above. Note that <code class="highlighter-rouge">DriverManagerTransactor</code> provides an unbounded number of connections and is unsuitable for production use anyway, so we do not require the blocking pools here (it uses an unbounded pool internally). Fine for testing but don’t use it in real life.</p>

<p>See the book chapter on <strong>Managing Connections</strong> for more information and examples.</p>

<h4 id="streams-and-resources">Streams and Resources</h4>

<p>In 0.5.x we provided some single-element <code class="highlighter-rouge">Stream</code>s that would emit values and guarantee resource cleanup. This has been generalized as <code class="highlighter-rouge">Resource</code> in cats-effect 1.x, and all such constructors (<code class="highlighter-rouge">H2Transactor.newH2Transactor</code> for example) now use <code class="highlighter-rouge">Resource</code> rather than <code class="highlighter-rouge">Stream</code>. You can use <code class="highlighter-rouge">Stream.resource(rsrc)</code> to regain the old functionality if desired.</p>

<h4 id="splitting-of-readwrite-functionality">Splitting of read/write functionality.</h4>

<p>Prior to the 0.6.x series we provided two typeclasses for <strong>bidirectional</strong> type mapping:</p>
<ul>
  <li><code class="highlighter-rouge">Meta</code> defined nullable mappings between column/parameter values and scala types.</li>
  <li><code class="highlighter-rouge">Composite</code> defined null-safe mappings betwen column/parameter <strong>vectors</strong> and scala types.</li>
</ul>

<p>Starting with version 0.6.0 type mappings are <strong>unidirectional</strong>:</p>
<ul>
  <li><code class="highlighter-rouge">Meta</code> has been split into <code class="highlighter-rouge">Get</code> and <code class="highlighter-rouge">Put</code> typeclasses, for reads and writes of column/parameter values, respectively.</li>
  <li><code class="highlighter-rouge">Composite</code> has been split into <code class="highlighter-rouge">Read</code> and <code class="highlighter-rouge">Write</code> typeclasses, for reads and writes of column/parameter vectors, respecitively.</li>
</ul>

<p>Note that <code class="highlighter-rouge">Meta</code> does still exist, but only as a mechanism for introducing <code class="highlighter-rouge">Get/Put</code> pairs. An implicit <code class="highlighter-rouge">Meta[A]</code> induces both an implicit <code class="highlighter-rouge">Get[A]</code> and an implicit <code class="highlighter-rouge">Put[A]</code>, and the old mechanism of <code class="highlighter-rouge">Meta[A].imap(...)(...)</code> is still supported for this purpose. The <code class="highlighter-rouge">xmap</code> method has been replaced with parametric <code class="highlighter-rouge">imap</code> and <code class="highlighter-rouge">TypeTag</code>-constrained <code class="highlighter-rouge">timap</code>. Prefer <code class="highlighter-rouge">timap</code> when possible because it yields better diagnostic information when typechecking queries.</p>

<p>To summarize:</p>

<table>
  <thead>
    <tr>
      <th>0.5.x</th>
      <th>0.6.x</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">[A: Meta]</code></td>
      <td><code class="highlighter-rouge">[A: Get : Put]</code></td>
      <td>Or just one, depending on usage.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">[A: Composite]</code></td>
      <td><code class="highlighter-rouge">[A: Read : Write]</code></td>
      <td>Or just one, depending on usage.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Meta[A].xmap(..)</code></td>
      <td><code class="highlighter-rouge">Meta[A].timap(...)</code></td>
      <td>Or <code class="highlighter-rouge">imap</code> when a <code class="highlighter-rouge">TypeTag</code> is unavailable.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Composite[A].xmap(...)</code></td>
      <td><code class="highlighter-rouge">Read[A].map(...)</code> <br /> <code class="highlighter-rouge">Write[A].contramap(...)</code></td>
      <td>This takes two steps now.</td>
    </tr>
  </tbody>
</table>

<p>Please refer to book chapter on <strong>Custom Mappings</strong> and the <code class="highlighter-rouge">examples</code> project for more details.</p>

<h4 id="other-changes">Other Changes</h4>

<ul>
  <li>postgres-circe module created exposing Get and Put instances for <code class="highlighter-rouge">io.circe.Json</code></li>
  <li>upgraded to cats-effect 1.0 and fs2 1.0</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-053"><a name="0.5.3"></a>New and Noteworthy for Version 0.5.3</h3>

<p>Minor updates, see below.</p>

<ul>
  <li>Updated to <strong>refined 0.9</strong>, <strong>fs2 0.10.4</strong>, <strong>Hikari 3.1.0</strong>, <strong>ScalaCheck 1.14.0</strong>, and <strong>Specs2 4.2.0</strong>.</li>
  <li>Added <code class="highlighter-rouge">.execWith</code> method to <code class="highlighter-rouge">Fragment</code>, allowing for custom handling of the associated statement.</li>
  <li>Added <code class="highlighter-rouge">pure</code> to generated algebras, so you can now say <code class="highlighter-rouge">FC.pure(1)</code> instead of <code class="highlighter-rouge">1.pure[ConnectionIO]</code> if you like. Thanks wedens!</li>
  <li>Added an example of generic DAOs for simple schemas. See <code class="highlighter-rouge">Orm.scala</code> in the <code class="highlighter-rouge">example</code> project.</li>
  <li>Minor doc updates.</li>
</ul>

<p>This is the last planned release in the 0.5.x series. Work will start soon on 0.6!</p>

<hr />
<h3 id="new-and-noteworthy-for-version-052"><a name="0.5.2"></a>New and Noteworthy for Version 0.5.2</h3>

<p>Minor updates, see below.</p>

<ul>
  <li>Added experimental support for Blazing Fast™ inserts in Postgres via <code class="highlighter-rouge">COPY ... FROM STDIN</code>. See book Chapter 15 for an example.</li>
  <li>Introduced <a href="https://github.com/lightbend/migration-manager">MiMa</a> for checking binary compatibility. Note that for the 0.5.x series we will guarantee compatibility for Scala 2.12 only.</li>
  <li><code class="highlighter-rouge">FirstExample</code> now actually shows output! Thanks Aaron Hawley.</li>
  <li>Added pgEnumStringOpt for transparently partial pgEnum decoding. Thanks Christopher Davenport!</li>
  <li>Added <code class="highlighter-rouge">Composite.deriveComposite[A]()</code> which creates a “semi-automatic” derivation of <code class="highlighter-rouge">Composite[]</code> for a given type <code class="highlighter-rouge">A</code>. While instances are usually derived automatically, this can be used to speed up compilation by only deriving once. It can also be used to avoid needing <code class="highlighter-rouge">Meta[]</code> instances in scope or derivable at every site where a given <code class="highlighter-rouge">Composite[A]</code> is used. Thanks Scott Parish!</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-051"><a name="0.5.1"></a>New and Noteworthy for Version 0.5.1</h3>

<p>Minor update to get dependencies up to date.</p>

<ul>
  <li>Updated to <strong>fs2 0.10.2</strong>, <strong>hikari-cp 2.7.8</strong>, and <strong>specs2 4.0.3</strong>.</li>
  <li>You can now do <code class="highlighter-rouge">.stripMargin</code> on fragments, thanks to Arne Claassen!</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-050"><a name="0.5.0"></a>New and Noteworthy for Version 0.5.0</h3>

<p>This introduces the <strong>0.5.x</strong> series which standardizes on <a href="http://typelevel.org/cats/"><strong>cats</strong></a>, <a href="https://github.com/typelevel/cats-effect"><strong>cats-effect</strong></a>, and <a href="https://github.com/functional-streams-for-scala/fs2"><strong>fs2</strong></a>. This is a big release that will make life much simpler for people who were using 0.4.x with cats. See the <strong>migration</strong> document on the microsite for more information.</p>

<p><strong>Many thanks</strong> to Andreas Svanberg, Bjørn Madsen, Charles Hunt, Christopher Davenport, Dale Wijnand, Devin Ekins, Dmitry Polienko, Earl St Sauver, fabio labella, Frank S. Thomas, Hossam Karim, Jisoo Park, Keir Lawson, Mads Hartmann, nigredo-tori, Radu Gancea, sh0hei, Stephen Lazaro, tgalappathth, wedens, and x1- for their contributions to this release!</p>

<p>Notable changes:</p>

<h5 id="cats-standardization">Cats Standardization</h5>

<ul>
  <li>🎵 <em>Ding, dong the yax is dead!</em> 🎵 The new codebase is based on cats!</li>
  <li>The <code class="highlighter-rouge">-cats</code> segment of artifact names is gone. <code class="highlighter-rouge">doobie-core</code> uses cats now, as does everything else.</li>
</ul>

<h5 id="api-changes">API Changes</h5>

<ul>
  <li>Rather than <code class="highlighter-rouge">foo.imports._</code> for both names and implicits, there are now distinct imports <code class="highlighter-rouge">foo._, foo.implicits._</code>. The old <code class="highlighter-rouge">foo.imports._</code> still works but is deprecated.</li>
  <li>Syntax classes are now organized as in cats. Much cleaner but end users probably won’t notice.</li>
  <li><code class="highlighter-rouge">Composite[A]</code> now implies <code class="highlighter-rouge">Composite[Option[A]]</code> which is a very useful change. It means joins can be expressed much more easily. See <code class="highlighter-rouge">Join.scala</code> in the <code class="highlighter-rouge">example</code> project.</li>
</ul>

<h5 id="project-structure-build-etc">Project Structure, Build, Etc.</h5>

<ul>
  <li>The doc has been ported to <a href="https://github.com/47deg/sbt-microsites">sbt-microsites</a>.</li>
  <li><code class="highlighter-rouge">FreeGen2</code> code generator now generates all effect types with <code class="highlighter-rouge">cats.effect.Async</code> instances, in preparation for transactors that can make use of distinct thread pools for certain operations (JDBC primitives for instance). Free algebras and interpreters for Postgres are also generated now.</li>
  <li>Added <a href="http://www.wartremover.org/">WartRemover</a> finally.</li>
  <li>The release process is much better, so releases can be more frequent. Version numbers appearing in the doc are now supplied automatically.</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-044"><a name="0.4.4"></a>New and Noteworthy for Version 0.4.4</h3>

<p>This release fixes an <a href="https://github.com/tpolecat/doobie/pull/569">issue</a> with HikariTransactor (thanks Naoki Aoyama) and supersedes the botched 0.4.3 release.</p>

<hr />
<h3 id="new-and-noteworthy-for-version-043"><a name="0.4.3"></a>New and Noteworthy for Version 0.4.3</h3>

<p>This was a failed attempt to add back support for 2.10. Do not use this release.</p>

<hr />
<h3 id="new-and-noteworthy-for-version-042"><a name="0.4.2"></a>New and Noteworthy for Version 0.4.2</h3>

<p>Sparkly contributors for this release are :sparkles: n4to4, :sparkles: Alexa DeWit, :sparkles: wedens, :sparkles: Colt Frederickson, :sparkles: Benjamin Trenker, :sparkles: nigredo-tori, :sparkles: Suhas Gaddam, :sparkles: Christopher Davenport, :sparkles: Damir Vandic, :sparkles: Jacob Barber, and :chicken: tpolecat. Noteworthy changes:</p>

<ul>
  <li>Dropped support for 2.10 because I can’t figure out how to publish it.</li>
  <li>Replaced all the <code class="highlighter-rouge">doobie.free</code> internals with a new design that makes it practical to write your own interpreter (or, more commonly, subclass the default one) which is very useful for testing and who knows what else. For most users this will not be an observable change.</li>
  <li>Switched to a new transactor design that makes it simple to customize behavior, and combined with new interpreter design makes it practical to use <strong>doobie</strong> types in free coproducts (see <code class="highlighter-rouge">coproduct.scala</code> in the <code class="highlighter-rouge">example</code> project). This is a <strong>minor breaking change</strong>:
    <ul>
      <li>The <code class="highlighter-rouge">yolo</code> member on <code class="highlighter-rouge">Transactor</code> is no longer stable, so you cannot <code class="highlighter-rouge">import xa.yolo._</code> anymore; instead you must say <code class="highlighter-rouge">val y = xa.yolo; import y._</code>. Because this is typically done with <code class="highlighter-rouge">initialCommands</code> in sbt it’s unlikely to be a big deal.</li>
      <li><code class="highlighter-rouge">Transactor</code> is now a final case class with an extra type member for the underlying pool or other connection source.</li>
    </ul>
  </li>
  <li>Note that the interpreter/transactor changes require <code class="highlighter-rouge">Monad</code> instances at a few more call sites, which should be transparent in most cases but may require Cats users to <code class="highlighter-rouge">import fs2.interop.cats._</code> here and there … if scalac is claiming there’s no instance available after upgrading that’s probably why.</li>
  <li>Added support for type refinements (refined library). See the <code class="highlighter-rouge">doobie-refined</code> and <code class="highlighter-rouge">doobie-refined-cats</code> modules.</li>
  <li>Added a <code class="highlighter-rouge">fail</code> constructor to all the <code class="highlighter-rouge">F*</code> modules.</li>
  <li>Made <code class="highlighter-rouge">Meta.nxmap</code> unnecessary and fixed issues with mappings that are undefined for zero values of underlying unboxed types.</li>
  <li>Added mapping for Postgres <code class="highlighter-rouge">hstore</code> type.</li>
  <li>Make postgres enums nullable (change <code class="highlighter-rouge">Atom</code> instance to <code class="highlighter-rouge">Meta</code>).</li>
  <li>Generalized <code class="highlighter-rouge">QueryChecker</code> and <code class="highlighter-rouge">AnalysisSpec</code> to allow any effect type.</li>
  <li>Added <code class="highlighter-rouge">stream</code> and <code class="highlighter-rouge">streamWithChunkSize</code> as fs2 friendly aliases on <code class="highlighter-rouge">Query</code>.</li>
  <li>Fix parsing of JDBC type TimestampWithTimezone (introduced in JDK 8).</li>
  <li>Added <code class="highlighter-rouge">Suspendable</code> instance for <code class="highlighter-rouge">PGConnectionIO</code></li>
  <li>Added an <code class="highlighter-rouge">Unknown</code> constructor to <code class="highlighter-rouge">JdbcType</code> for JDBC type constants outside the spec and known extensions.</li>
  <li>Generalized the underlying structure of <code class="highlighter-rouge">Meta</code>/<code class="highlighter-rouge">Composite</code> and eliminated <code class="highlighter-rouge">Atom</code>. Client code that uses <code class="highlighter-rouge">Atom</code> will need to be re-implemented in terms of <code class="highlighter-rouge">Meta</code> or <code class="highlighter-rouge">Composite</code>.</li>
  <li>Added <code class="highlighter-rouge">Fragment.const0</code> for constant fragments with no trailing space, while <code class="highlighter-rouge">const</code> now <em>does</em> add a trailing space. Users of <code class="highlighter-rouge">Fragment.const</code> may need/wish to change to <code class="highlighter-rouge">const0</code>.</li>
  <li><code class="highlighter-rouge">Manifest</code> replaced with <code class="highlighter-rouge">TypeTag</code> in <code class="highlighter-rouge">doobie.util.invariant</code>.</li>
  <li>Improved H2 UUID Support.  Query analysis involving H2 and UUIDs should no longer show a type mismatch.</li>
</ul>

<p>In addition the following libraries were updated:</p>

<ul>
  <li>sbt 0.13.15</li>
  <li>Scala 2.10.6, 2.11.11, 2.12.3</li>
  <li>scalaz 7.2.9</li>
  <li>PostgreSQL JDBC driver 42.1.1</li>
  <li>Hikari 2.6.1</li>
  <li>Circe 0.8.0</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-041"><a name="0.4.1"></a>New and Noteworthy for Version 0.4.1</h3>

<p>This release updates <strong>doobie</strong> to Cats 0.9 and the associated fs2-cats interop layer to 0.3, courtesy of mighty space robot Adelbert Chang. There are no other changes.</p>

<hr />
<h3 id="new-and-noteworthy-for-version-040"><a name="0.4.0"></a>New and Noteworthy for Version 0.4.0</h3>

<p>This was intended to be a quick follow-up to 0.3.0 but it got a little out of hand and turned into a major release. <strong>Please read these notes carefully</strong> because there are some breaking changes relative to 0.3.0.</p>

<p>Eighteen people contributed to this release, of whom seventeen were not tpolecat. They are sparkly and awesome. In no particular order, many many thanks to :sparkles: Channing Walton :sparkles: Daniel Wunsch :sparkles: Gary Coady :sparkles: Tristan Lohman :sparkles: Jisoo Park :sparkles: Yury Liavitski :sparkles: Ikhoon Eom :sparkles: Marek Kadek :sparkles: Leif Wickland :sparkles: Zack Powers :sparkles: Kris Nuttycombe :sparkles: Pepe García :sparkles: Peter Neyens :sparkles: ritschwumm :sparkles: ronanM :sparkles: Sam Ritchie :sparkles: and wedens. :sparkles:</p>

<h5 id="cats-support">Cats Support</h5>

<p>This is probably the most important development for 0.4.0 and it is due in large part to the hard work of :sparkles: Jisoo Park :sparkles:. Impossibly huge thanks for his work throughout this process.</p>

<p><img align="right" height="150" style="padding-left: 20px" src="https://camo.githubusercontent.com/c7a1d594954b34a8277bce52343fe731b14870ad/687474703a2f2f706c61737469632d69646f6c617472792e636f6d2f6572696b2f63617473322e706e67" /></p>

<ul>
  <li><strong>doobie</strong> is now built natively for <a href="https://github.com/typelevel/cats">Cats</a> with <a href="https://github.com/functional-streams-for-scala/fs2/tree/series/0.9">fs2</a>, with no need for a shim/adapter layer. At the moment this is accomplished via a preprocessor.</li>
  <li>All artifacts are built for Cats. Names are suffixed with <code class="highlighter-rouge">-cats</code>, so the scalaz version is <code class="highlighter-rouge">doobie-core</code> and the Cats version is <code class="highlighter-rouge">doobie-core-cats</code>.</li>
  <li>The <strong>book of doobie</strong> is now published in separate editions for scalaz and Cats.</li>
</ul>

<h5 id="changes-to-core">Changes to Core</h5>

<ul>
  <li>There is now support for simple <strong>statement logging</strong> with timing information. This is <em>not</em> the long-promised structured logging feature but it fits the common use case and fills a clear functional gap. See the book chapter for details and examples.</li>
  <li>The <strong>dynamic SQL</strong> story is now slightly better with the introduction of <strong>composable statement fragments</strong>. These allow you to build statements from smaller pieces without having to track parameter placeholders/offsets by hand. See the book chapter for details and examples.</li>
  <li>SQL <code class="highlighter-rouge">IN</code> clauses are now handled via <code class="highlighter-rouge">Fragments.in</code>, which is a <strong>breaking change</strong> relative to 0.3.0. See the book chapter on parameterized queries for an example.</li>
  <li>Methods on <code class="highlighter-rouge">Query[0]/Update[0]</code> that construct streams (<code class="highlighter-rouge">.process</code>) now have variants that allow you to specify the <strong>chunk size</strong>, which by default is 512 rows.</li>
  <li>There is now an <code class="highlighter-rouge">IO</code> data type that you can use if you’re having a hard time settling on a target effect type. It works identically in Cats and scalaz and is what’s used in the book.</li>
</ul>

<h5 id="changes-to-add-on-modules">Changes to Add-On Modules</h5>

<p>We cleaned up the add-on modules a bit and made some naming simplifications that are <strong>breaking</strong> relative to 0.3.0.</p>

<ul>
  <li>There is now a <strong>ScalaTest</strong> add-on. See the book chapter on unit testing for details and examples.</li>
  <li>The <code class="highlighter-rouge">contrib</code> segment has been removed from module names, so <code class="highlighter-rouge">doobie-contrib-h2</code> is now just <code class="highlighter-rouge">doobie-h2</code>. It has also been removed from <em>package</em> names. So <code class="highlighter-rouge">doobie.contrib.h2</code> is now just <code class="highlighter-rouge">doobie.h2</code>.</li>
  <li>In both cases the <code class="highlighter-rouge">postgresql</code> segment has been shortened to <code class="highlighter-rouge">postgres</code>.</li>
  <li>All modules now have a consistent import story. <code class="highlighter-rouge">import doobie.&lt;module&gt;.imports._</code> should get you everything you need.</li>
</ul>

<p>That’s it! Enjoy the release. Once again many thanks to our contributors.</p>

<hr />
<h3 id="new-and-noteworthy-for-version-030"><a name="0.3.0"></a>New and Noteworthy for Version 0.3.0</h3>

<p>This release brings <strong>doobie</strong> up to date with major dependencies, almost entirely due to the hard work of <strong>@guersam</strong>. The release is otherwise equivalent to 0.2.4 from a feature standpoint.</p>

<p>Upgrades:</p>
<ul>
  <li>Updated to scalaz 7.2</li>
  <li>Updated to shapeless 2.3</li>
  <li>Updated to JDK 1.8</li>
  <li>Added build support Scala 2.12</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-024"><a name="0.2.4"></a>New and Noteworthy for Version 0.2.4</h3>

<p>This is a minor release with a few odds and ends and an important library update.</p>

<p>Improvements:</p>
<ul>
  <li>You can now construct a <code class="highlighter-rouge">HikariTransactor</code> from an existing <code class="highlighter-rouge">HikariDataSource</code> (thanks <strong>@raulraja</strong>).</li>
  <li>There is now a <code class="highlighter-rouge">.nel</code> accumulator for non-empty resultsets (thanks <strong>@refried</strong>).</li>
  <li>Arrays of <code class="highlighter-rouge">UUID</code>s are now supported for PostgreSQL (thanks <strong>@veegee</strong>).</li>
  <li>Published jarfiles now have OSGi headers.</li>
  <li>Some internal cleanup but nothing that should affect end users.</li>
</ul>

<p>Upgrades:</p>
<ul>
  <li>Updated to scalaz-stream 0.8 (thanks <strong>@guersam</strong>).</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-023"><a name="0.2.3"></a>New and Noteworthy for Version 0.2.3</h3>

<p>This release includes more performance work and some usability improvements, as well as documentation improvements here and there. This release should be source-compatible for most users, but is <strong>not</strong> binary compatible with 0.2.2 or any other release. Let me know if you run into source compatibilty problems. Special thanks to <strong>@mdmoss</strong> for build improvements, <strong>@fommil</strong> and <strong>@non</strong> for help with Sonatype, and everyone else for your continued interest and contributions!</p>

<p>Improvements:</p>

<ul>
  <li><strong>doobie</strong> is now published on Sonatype and no longer requires a Bintray resolver.</li>
  <li>The <code class="highlighter-rouge">free</code> modules now provide natural transformations of the form <code class="highlighter-rouge">FooIO ~&gt; Kleisli[M, Foo, ?]</code> and <code class="highlighter-rouge">Foo =&gt; FooIO ~&gt; M</code>, which should make life easier when using <strong>doobie</strong> with existing JDBC resources (your own <code class="highlighter-rouge">Connection</code> for example).</li>
  <li>New optimized column-vector reads and accumulators for <code class="highlighter-rouge">IList</code> and standard library collections via <code class="highlighter-rouge">CanBuildFrom</code> yield performance generally indistinguishable from raw JDBC. The <code class="highlighter-rouge">Query/Query0</code> operations <code class="highlighter-rouge">to</code>, <code class="highlighter-rouge">list</code>, and <code class="highlighter-rouge">vector</code> are now very fast. Result handling via <code class="highlighter-rouge">Process</code> benefits to a lesser extent.</li>
  <li><code class="highlighter-rouge">Composite</code> instances are now available for shapeless record types.</li>
  <li><code class="highlighter-rouge">Atom</code> instances are now available for single-element product types (thanks <strong>@wedens</strong> and <strong>@refried</strong>).</li>
  <li><code class="highlighter-rouge">DriverManagerTransactor</code> now includes constructors corresponding to all <code class="highlighter-rouge">getConnection</code> methods on <code class="highlighter-rouge">DriverManager</code>.</li>
  <li><code class="highlighter-rouge">free</code> algebras and interpreters have been re-implemented to use method dispatch rather than large <code class="highlighter-rouge">match</code> expressions, resulting in minor performance improvements throughout. This completes the work started in 0.2.2.</li>
  <li>The <code class="highlighter-rouge">sql</code> interpolator now supports interpolated sequences for SQL <code class="highlighter-rouge">IN</code> clauses. See <a href="http://tpolecat.github.io/doobie-0.2.3/05-Parameterized.html">Chapter 5</a> for more information.</li>
  <li>The <strong>book of doobie</strong> now includes a <a href="http://tpolecat.github.io/doobie-0.2.3/15-FAQ.html">FAQ Chapter</a>.</li>
  <li>The <code class="highlighter-rouge">example</code> project now includes some PostgreSQL CopyManager examples (thanks <strong>@wedens</strong>).</li>
</ul>

<p>Big Fixes:</p>

<ul>
  <li>The PostGIS dependency was pulling in unnecessary transitive dependencies that caused problems with sbt-assembly. This has been fixed.</li>
</ul>

<p>Upgrades:</p>

<ul>
  <li>Updated to Scala 2.11.7</li>
  <li>Updated to shapeless 2.2.5</li>
  <li>Updated to scalaz-stream 0.7.2a</li>
  <li>Updated to specs2-core 3.6</li>
  <li>Updated to tut 0.4.0 (build-time dependency only)</li>
  <li>Updated to sbt 0.13.8 (build-time dependency only)</li>
  <li>Updated to kind-projector 0.7.1 (build-time dependency only)</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-022"><a name="0.2.2"></a>New and Noteworthy for Version 0.2.2</h3>

<p>This is another minor release that adds yet more support PostgreSQL-specific features, updates dependencies, and improves performance for resultset processing. Thanks everyone for your continued interest and contributions!</p>

<p>Additions:</p>

<ul>
  <li>Added <code class="highlighter-rouge">HC.updateManyWithGeneratedKeys</code> and associated syntax on <code class="highlighter-rouge">Update</code> to allow batch updates to return updated rows. See <a href="http://tpolecat.github.io/doobie-0.2.2/07-Updating.html">Chapter 7</a> for an example.</li>
  <li>Added algebras and free monads thereof for PostgreSQL vendor-specific driver APIs, which allows <strong>doobie</strong> to directly support <code class="highlighter-rouge">LISTEN/NOTIFY</code>, <code class="highlighter-rouge">COPY FROM STDIN</code> and a number of other interesting features. See <a href="http://tpolecat.github.io/doobie-0.2.2/13-Extensions-PostgreSQL.html">Chapter 13</a> for details and examples.</li>
</ul>

<p>Improvements:</p>

<ul>
  <li>Huge improvements to the implementation of the <code class="highlighter-rouge">sql</code> interpolator, courtesy of <a href="https://twitter.com/milessabin">@milessabin</a>. This removes the last remaining arity limit.</li>
  <li>Added examples for PostgreSQL-specific error handling combinators. See <a href="http://tpolecat.github.io/doobie-0.2.2/13-Extensions-PostgreSQL.html">Chapter 13</a> for more information.</li>
  <li>Added <code class="highlighter-rouge">Unapply</code> instances to make the <code class="highlighter-rouge">Monad</code> instance for <code class="highlighter-rouge">FreeC</code> and associated syntax conversions inferrable. For now these are on the <code class="highlighter-rouge">doobie.imports</code> module.</li>
  <li>Significant performance improvements for resultset processing, with <code class="highlighter-rouge">.list</code> and <code class="highlighter-rouge">.vector</code> now ~4.5x faster and <code class="highlighter-rouge">.process</code> ~2.5x faster. This work is ongoing.</li>
</ul>

<p>Upgrades:</p>

<ul>
  <li>Updated to Scala 2.10.5</li>
  <li>Updated to shapeless 2.2.0 (thanks <a href="https://twitter.com/milessabin">@milessabin</a>)</li>
  <li>Updated to scalaz-stream 0.7a</li>
  <li>Updated to PostgreSQL JDBC driver 9.4-1201-jdbc41</li>
  <li>Updated to Specs2 3.6 (thanks <a href="https://twitter.com/etorreborre">@etorrebore</a>)</li>
</ul>

<hr />
<h3 id="new-and-noteworthy-for-version-021"><a name="0.2.1"></a>New and Noteworthy for Version 0.2.1</h3>

<p>This is a minor follow-up release, primarily to add support for some PostgreSQL features and other odds and ends reported by users. Thanks to users and contributors for their help!</p>

<p>Additions:</p>

<ul>
  <li>Added <code class="highlighter-rouge">Transactor</code> to wrap an existing <code class="highlighter-rouge">DataSource</code>. See <a href="http://tpolecat.github.io/doobie-0.2.1/12-Managing-Connections.html">Chapter 12</a> for more information.</li>
  <li>Added support for PostGIS and PostgreSQL <code class="highlighter-rouge">enum</code> types. See <a href="http://tpolecat.github.io/doobie-0.2.1/13-Extensions-PostgreSQL.html">Chapter 13</a> for more information.</li>
  <li>Added combinators for batch updates. See <a href="http://tpolecat.github.io/doobie-0.2.1/07-Updating.html">Chapter 7</a> for more information.</li>
  <li>Added <code class="highlighter-rouge">Composite</code> support for <code class="highlighter-rouge">HList</code>; anywhere you could map a product or tuple type in 0.2.0 you can now also use a <a href="https://github.com/milessabin/shapeless">shapeless</a> <code class="highlighter-rouge">HList</code>.</li>
  <li>Added <code class="highlighter-rouge">Atom</code> support for <code class="highlighter-rouge">scalaz.Maybe</code>; anywhere you could map an <code class="highlighter-rouge">Option</code> type in 0.2.0 you can now also use <code class="highlighter-rouge">Maybe</code>.</li>
  <li>Added <code class="highlighter-rouge">.optionT</code> method on <code class="highlighter-rouge">Query</code> and <code class="highlighter-rouge">Query0</code>.</li>
  <li>Added an <a href="https://github.com/tpolecat/doobie/blob/v0.2.1/example/src/main/scala/example/PostgresNotify.scala">example</a> that exposes a PostgreSQL <code class="highlighter-rouge">NOTIFY</code> channel as an scalaz-stream <code class="highlighter-rouge">Process</code>.</li>
</ul>

<p>Improvements:</p>

<ul>
  <li>The 22-parameter limit on the <code class="highlighter-rouge">sql</code> interpolator has been increased to 50, and should go away entirely by 0.3.0 at the latest. There are no other arity limits in <strong>doobie</strong>.</li>
  <li>All <code class="highlighter-rouge">Query</code> and <code class="highlighter-rouge">Update</code> constructions are now supported for typechecking with Specs2 and YOLO mode.</li>
  <li>Many improvements in <strong>book of doobie</strong>.</li>
  <li>Tidied up examples a bit.</li>
</ul>

<p>Upgrades:</p>

<ul>
  <li>Updated to Scala 2.11.6.</li>
  <li>Updated to scalaz 7.1.1 and scalaz-stream 0.6a</li>
  <li>Updated to <a href="https://github.com/tpolecat/tut">tut</a> 0.3.1 (build only; not user-facing).</li>
  <li>Updated to Specs2 3.9.4</li>
</ul>

<p>Bug Fixes:</p>

<ul>
  <li>Fixed problem with typechecking <code class="highlighter-rouge">BOOLEAN</code> column mappings.</li>
  <li>Fixed driver classloading problem with <code class="highlighter-rouge">HikariTransactor</code>.</li>
</ul>

</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>doobie is designed and developed by <a href="" target="_blank" rel="noopener noreferrer">Rob Norris</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/tpolecat/doobie"><span class="fa fa-github"></span>View on GitHub</a></p></div></div><div class="row"><div class="col-xs-6"><p>Website built with <a href="https://47deg.github.io/sbt-microsites/" target="_blank" rel="noopener noreferrer">sbt-microsites</a> - © 2019 <a href="https://www.47deg.com/" target="_blank" rel="noopener noreferrer">47 Degrees</a></p></div></div><script src="/doobie/highlight/highlight.pack.js"></script><script>hljs.initHighlighting();
              </script></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/doobie/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script></body></html>