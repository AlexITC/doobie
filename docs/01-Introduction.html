<html><head><title>doobie: Introduction</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Rob Norris" /><meta name="description" content="A functional JDBC layer for Scala." /><meta name="og:image" content="/doobie/img/poster.png" /><meta name="image" property="og:image" content="/doobie/img/poster.png" /><meta name="og:title" content="doobie: Introduction" /><meta name="title" property="og:title" content="doobie: Introduction" /><meta name="og:site_name" content="doobie" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A functional JDBC layer for Scala." /><link rel="icon" type="image/png" href="/doobie/img/favicon.png" /><meta name="twitter:title" content="doobie: Introduction" /><meta name="twitter:image" content="/doobie/img/poster.png" /><meta name="twitter:description" content="A functional JDBC layer for Scala." /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/doobie/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/doobie/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/doobie/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/doobie/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/doobie/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/doobie/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/doobie/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/doobie/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/doobie/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/doobie/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/doobie/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/doobie/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/doobie/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/doobie/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/doobie/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/doobie/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/doobie/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/doobie/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/doobie/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/doobie/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/doobie/highlight/styles/color-brewer.css" /><link rel="stylesheet" href="/doobie/css/style.css" /><link rel="stylesheet" href="/doobie/css/palette.css" /><link rel="stylesheet" href="/doobie/css/codemirror.css" /><link rel="stylesheet" href="/doobie/css/tweak.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/doobie/" class="brand"><div class="brand-wrapper"><span>doobie</span></div></a></li><li><a href="/doobie/css/style.css" class=""></a></li><li><a href="/doobie/docs/02-Toolkit.html" class="">Toolkit</a></li><li><a href="/doobie/docs/03-Connecting.html" class="">Connecting to a Database</a></li><li><a href="/doobie/docs/04-Selecting.html" class="">Selecting Data</a></li><li><a href="/doobie/docs/05-Parameterized.html" class="">Parameterized Queries</a></li><li><a href="/doobie/docs/06-Checking.html" class="">Typechecking Queries</a></li><li><a href="/doobie/docs/07-Updating.html" class="">DDL, Inserting, and Updating</a></li><li><a href="/doobie/docs/08-Fragments.html" class="">Statement Fragments</a></li><li><a href="/doobie/docs/09-Error-Handling.html" class="">Error Handling</a></li><li><a href="/doobie/docs/10-Logging.html" class="">Logging</a></li><li><a href="/doobie/docs/11-Arrays.html" class="">SQL Arrays</a></li><li><a href="/doobie/docs/12-Custom-Mappings.html" class="">Custom Mappings</a></li><li><a href="/doobie/docs/13-Unit-Testing.html" class="">Unit Testing</a></li><li><a href="/doobie/docs/14-Managing-Connections.html" class="">Managing Connections</a></li><li><a href="/doobie/docs/15-Extensions-PostgreSQL.html" class="">Extensions for PostgreSQL</a></li><li><a href="/doobie/docs/16-Extensions-H2.html" class="">Extensions for H2</a></li><li><a href="/doobie/docs/17-Quill.html" class="">Quill Integration</a></li><li><a href="/doobie/docs/18-FAQ.html" class="">Frequently-Asked Questions</a></li><li><a href="/doobie/" class=""></a></li><li><a href="/doobie/css/palette.css" class=""></a></li><li><a href="/doobie/docs/01-Introduction.html" class=" active ">Introduction</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/tpolecat/doobie"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/tpolecat/doobie"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('doobie A functional JDBC layer for Scala.');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('doobie A functional JDBC layer for Scala.');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="tpolecat" data-github-repo="doobie"><div class="content-wrapper"><section><div style="margin-bottom: 20px; text-align: center"><img src="../img/yeah.png" /></div>

<h2 id="introduction">Introduction</h2>

<p>This is a very short book about <strong>doobie</strong>, which is a pure-functional JDBC layer for Scala.</p>

<p><strong>doobie</strong> provides low-level access to everything in <code class="highlighter-rouge">java.sql</code> (as of Java 8), allowing you to write any JDBC program in a pure functional style. However the focus of this book is the <strong>high-level API</strong>, which is where most users will spend their time.</p>

<p>This book is organized cookbook-style: we demonstrate a common task and then explain how it works, perhaps in more detail than you want right now. The goal is to get you up and running quickly, but give you a handle on the deeper stuff if you need it later.</p>

<h3 id="target-audience">Target Audience</h3>

<p>This library is designed for people who are interested in typed, pure functional programming. If you are not a <a href="https://github.com/typelevel/cats">Cats</a> user or are not familiar with functional I/O and monadic effects, you may need to go slowly and may want to spend some time reading <a href="http://manning.com/bjarnason/">Functional Programming in Scala</a>, which introduces all of the ideas that you will find when exploring <strong>doobie</strong>.</p>

<p>Having said this, if you find yourself confused or frustrated by this documentation or the <strong>doobie</strong> API, <em>please</em> ask a question on <a href="https://gitter.im/tpolecat/doobie">Gitter</a>, file an <a href="https://github.com/tpolecat/doobie/issues">issue</a> and ask for help. Both the library and the documentation are young and are changing quickly, and it is inevitable that some things will be unclear. Accordingly, <strong>this book is updated continuously</strong> to address problems and omissions.</p>

<h3 id="the-setup">The Setup</h3>

<p>This book is compiled as part of the build using the <a href="https://github.com/tpolecat/tut">tut</a> tutorial generator, so the code examples are guaranteed to compile (and with luck should also work correctly). Each page stands on its own: if you copy and paste code samples starting from the top, it will work in your REPL as long as you have the proper setup, described here.</p>

<h4 id="sample-database-setup">Sample Database Setup</h4>

<p>The example code assumes a local <a href="http://www.postgresql.org/">PostgreSQL</a> server with a <code class="highlighter-rouge">postgres</code> user with no password, <a href="http://postgis.net/">PostGIS</a> extensions (optional), and the sample <code class="highlighter-rouge">world</code> database loaded up. If you’re on a Mac you might check out the excellent <a href="http://postgresapp.com/">Postgres.app</a> if you don’t want to install PostgreSQL as a service. You can set up the user and sample database (and an <code class="highlighter-rouge">enum</code> we use in a few examples) as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ curl -O https://raw.githubusercontent.com/tpolecat/doobie/series/0.7.x/world.sql
$ psql -c 'create user postgres createdb'
$ psql -c 'create database world;' -U postgres
$ psql -c '\i world.sql' -d world -U postgres
$ psql -d world -c "create type myenum as enum ('foo', 'bar')" -U postgres
$ psql -d world -c "create extension postgis" -U postgres
</code></pre>
</div>

<p>Skip the last statement if you don’t have PostGIS installed. Note that the final <code class="highlighter-rouge">ANALYZE</code> comand in the import will emit a few errors for system tables. This is expected and is fine. Try a query or two to double-check your setup:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ psql -d world -U postgres
psql (9.3.5)
Type "help" for help.

world=&gt; select name, continent, population from country where name like 'U%';
                 name                 |   continent   | population
--------------------------------------+---------------+------------
 United Arab Emirates                 | Asia          |    2441000
 United Kingdom                       | Europe        |   59623400
 Uganda                               | Africa        |   21778000
 Ukraine                              | Europe        |   50456000
 Uruguay                              | South America |    3337000
 Uzbekistan                           | Asia          |   24318000
 United States                        | North America |  278357000
 United States Minor Outlying Islands | Oceania       |          0
(8 rows)

world=&gt; \q
$
</code></pre>
</div>

<p>You can of course change this setup if you like, but you will need to adjust your JDBC connection information accordingly. Most examples will work with any compliant database, but in a few cases (noted in the text) we rely on vendor-specific behavior.</p>

<h4 id="scala-setup">Scala Setup</h4>

<p>On the Scala side you just need a console with the proper dependencies. A minimal <code class="highlighter-rouge">build.sbt</code> would look something like this.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.13.0"</span> <span class="c1">// Scala 2.12/13
</span>
<span class="n">scalacOptions</span> <span class="o">+=</span> <span class="s">"-Ypartial-unification"</span> <span class="c1">// 2.11.9+
</span>
<span class="k">lazy</span> <span class="k">val</span> <span class="n">doobieVersion</span> <span class="k">=</span> <span class="s">"0.8.6"</span>

<span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="s">"org.tpolecat"</span> <span class="o">%%</span> <span class="s">"doobie-core"</span>     <span class="o">%</span> <span class="n">doobieVersion</span><span class="o">,</span>
  <span class="s">"org.tpolecat"</span> <span class="o">%%</span> <span class="s">"doobie-postgres"</span> <span class="o">%</span> <span class="n">doobieVersion</span><span class="o">,</span>
  <span class="s">"org.tpolecat"</span> <span class="o">%%</span> <span class="s">"doobie-specs2"</span>   <span class="o">%</span> <span class="n">doobieVersion</span>
<span class="o">)</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">-Ypartial-unification</code> compiler flag enables a bug fix that makes working with functional code significantly easier. See the Cats <a href="https://github.com/typelevel/cats#getting-started">Getting Started</a> for more info on this if it interests you.</p>

<p>If you are not using PostgreSQL you can omit <code class="highlighter-rouge">doobie-postgres</code> and will need to add the appropriate JDBC driver as a dependency. Note that there is a <code class="highlighter-rouge">doobie-h2</code> add-on if you happen to be using <a href="http://www.h2database.com/">H2</a>.</p>

<h3 id="conventions">Conventions</h3>

<p>Each page begins with some imports, like this.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats._</span><span class="o">,</span> <span class="n">cats</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="k">_</span><span class="o">,</span> <span class="n">cats</span><span class="o">.</span><span class="n">implicits</span><span class="o">.</span><span class="k">_</span>
<span class="k">import</span> <span class="nn">doobie._</span>
</code></pre>
</div>

<p>After that there is text interspersed with code examples. Sometimes definitions will stand alone.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Person</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">age</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>
<span class="k">val</span> <span class="n">nel</span> <span class="k">=</span> <span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">of</span><span class="o">(</span><span class="nc">Person</span><span class="o">(</span><span class="s">"Bob"</span><span class="o">,</span> <span class="mi">12</span><span class="o">),</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">14</span><span class="o">))</span>
</code></pre>
</div>

<p>And sometimes they will appear with output.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">nel</span><span class="o">.</span><span class="n">head</span>
<span class="c1">// res0: Person = Person("Bob", 12)
</span><span class="n">nel</span><span class="o">.</span><span class="n">tail</span>
<span class="c1">// res1: List[Person] = List(Person("Alice", 14))
</span></code></pre>
</div>

<p>Sometimes we demonstrate that something doesn’t compile. In such cases it will be clear from the context that this is expected, and not a problem with the documentation.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">woozle</span><span class="o">(</span><span class="n">nel</span><span class="o">)</span> <span class="c1">// doesn't compile
// error: not found: value woozle
// woozle(nel) // doesn't compile
// ^^^^^^
</span></code></pre>
</div>

<h3 id="feedback-and-contributions">Feedback and Contributions</h3>

<p>Feedback on <strong>doobie</strong> or this book is genuinely welcome. Please feel free to file a <a href="https://github.com/tpolecat/doobie">pull request</a> if you have a contribution, or file an <a href="https://github.com/tpolecat/doobie/issues">issue</a>, or chat with us on <a href="https://gitter.im/tpolecat/doobie">Gitter</a>.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/doobie/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/doobie/js/main.js"></script></body></html>